<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Songs on ADD SONG+</title>
    <link rel="stylesheet" href="css/styles.css">

</head>

<body>

    <body>
        <header>
            <div class="navDesign">
                <a href="./index.html">
                    <h4>ADD SONG<span class="logoColor">+</span></h4>
                </a>
                <nav>
                    <ul>
                        <li><a href="./playlist.html"><button class="navButton">My Playlists</button></a></li>
                        <li><button class="navButton">My Artists</button></li>
                        <li><a href="./mysongs.html"><button class="navButton">My Songs</button></a></li>
                    </ul>
                </nav>
                <a href="./AccountPage.html"><button class="accountButton" id="accountButton"><strong>Create
                            Account</strong></button></a>
            </div>
        </header>

        <div class="mainSongs">
            <h1>NeedToBreathe Band Info</h1>
            <p>What information do you want to know about your favorite band, NeedToBreathe?
            </p>


            <form id="bandAPI">
                <input type="text" name="inputEntry" />
                <button type="submit" class="searchButton">Search</button>
            </form>

            <p>Want to see all of NeedToBreathes albums? <button id="artistReleases" class="searchButton"
                    type="submit">See Albums</button></p>
            <div id="responseText" class="songsListDesign">

            </div>
            <div id="bandInfoResults">

            </div>
            <ul id="ulList"></ul>


        </div>


        <footer>
            <nav>
                <ul>
                    <li><button class="navButton"><a href="./contact.html">Contact</button></a></li>
                    <li>|</li>
                    <li><button class="navButton"><a href="./jobs.html">Careers</button></a></li>
                    <li>|</li>
                    <li><button class="navButton"><a href="./aboutAddSong.html">About ADD SONG<span
                                    class="logoColor">+</span></button></a></li>
                </ul>
            </nav>
        </footer>
        <!-- <script src="./js/main.js"></script> -->

        <script>
            document.addEventListener("DOMContentLoaded", function () {
                const bandAPIForm = document.querySelector("#bandAPI");
                const responseText = document.querySelector('#responseText');
                const bandInfoResults = document.querySelector('#bandInfoResults')


                bandAPIForm.addEventListener("submit", function (event) {
                    event.preventDefault();
                    const myUserInput = this.querySelector('input[name="inputEntry"]');
                    generateNewText();
                    // generateList(myUserInput);
                    function generateNewText() {
                        const newTextContainer = document.getElementById('responseText');
                        newTextContainer.style.display = 'block';
                        const tryThis = myUserInput.append(" Results")
                        newTextContainer.innerHTML = myUserInput + "<p> Results</p>";
                    }
                });

                function get(url) {
                    return fetch(url, {
                        method: 'GET',
                        headers: {
                            'User-Agent': 'Derek/3.0',
                        }
                    })
                        .then(function (response) {
                            return response.json();
                        })
                        .then(function (data) {
                            return data;
                        });
                }

                function showArtist(artistName) {
                    const paragraph = document.createElement('p');
                    paragraph.textContent = artistName;
                    bandInfoResults.appendChild(paragraph);
                }


                const albumButton = document.querySelector('#artistReleases')

                function getReleases(url) {
                    get(url).then(function (data) {
                        const { releases } = data;
                        console.log(releases);
                        releases.map(function (release) {
                            const { title } = release;
                            const paragraph = document.createElement('p');
                            albumButton.addEventListener("click", function () {
                                paragraph.textContent = title;
                                bandInfoResults.appendChild(paragraph);
                            })
                        })
                    })
                }

                (function () {
                    console.log("IIFE");
                    get('https://api.discogs.com/artists/934830?token=oGvvoBpcYVfzcTUSrzDcubjqvYRtOaTfnQWVaTUO').then(function (data) {
                        const { name, releases_url } = data;
                        showArtist(name);
                        getReleases(releases_url);
                    });
                })();

                // function generateList(userInput) {
                //     const ulList = document.querySelector('#ulList');
                //     const liElement = document.createElement('li');
                //     liElement.textContent = userInput.value
                //     ulList.appendChild(liElement);
                //     clearInput(userInput);
                // }

                // function clearInput(input) {
                //     input.value = '';
                //     return;
                // }
            })
        </script>
    </body>

</html>